<!-- MADE BY THOMAS HEBRARD
    AND    EDOUARD LAJOUANIE
-->
<div id="sign">
    Username: <input id="sign-username" type="text"></input><br>
    Password: <input id="sign-password" type="password"></input>
    <button id="sign-signIn">Sign In</button>
    <button id="sign-signUp">Sign Up</button>
</div>
<div id="game" style="display:none;">

    <div>
        <canvas id = "deck" width="500" height="200"
        style="border:1px solid blue">
    </canvas>
        <canvas id = "ctxx" width="500" height="200" 
        style="border:1px solid #000000;"></canvas>
    </div>
    <canvas id = "ctx" width="1000" height="500" 
        style="border:1px solid #000000;"></canvas>
<div>
    <canvas id = "deck" width="500" height="200"
    style="border:1px solid blue">
</canvas>
    <canvas id = "ctxx" width="500" height="200" 
    style="border:1px solid #000000;"></canvas>
</div>
<canvas id = "ctx" width="1000" height="500" 
    style="border:1px solid #000000;"></canvas>

<div id="chat-text" style="width:500px;height:100px;overflow-y:scroll">
    <div>Hello!</div>
</div>

<form id="chat-form">
    <input id="chat-input" type="text" style="width:500px"></input>
</form>

    <div id="chat-text" style="width:500px;height:100px;overflow-y:scroll">
        <div>Hello!</div>
    </div>

    <form id="chat-form">
        <input id="chat-input" type="text" style="width:500px"></input>
    </form>

</div>
<script src="/socket.io/socket.io.js"></script>

<script>
    /* On initialise la connection entre le client et le serveur */
    var socket = io();

    /* Sign */
    var sign = document.getElementById('sign');
    var sign_username = document.getElementById('sign-username');
    var sign_password = document.getElementById('sign_password');
    var sign_signIn = document.getElementById('sign-signIn');
    var sign_signUp = document.getElementById('sign-signUp');

    sign_signIn.onclick = function(){
        socket.emit('singIn', {username:sign_username.value, password:sign_password.value});
    }

    socket.on('signInResponse', function(data){
        if(data.success){
            sign.style.display = 'none';
            game.style.display = 'inline-block';
        } else {
            alert("Connexion erronée");
        }
    });
    /* Le chat instantané */
    var chatText = document.getElementById('chat-text');
    var chatInput = document.getElementById('chat-input');
    var chatForm = document.getElementById('chat-form');

    /* Pour dessiner le terrain de jeu*/
    var ctx = document.getElementById("ctx").getContext("2d");
    ctx.font = '30px Arial';

    /* Pour dessiner le deck de chaque joueur */
    var deck = document.getElementById("deck").getContext("2d");
    deck.font = '30px Arial';

    /* On initialise la connection entre le client et le serveur */
    var socket = io();

    socket.on('addToChat', function(data){
        chatText.innerHTML += '<div>' + data + '</div>';
    });

    chatForm.onsubmit = function(e){
        /* Si on a pas un preventDefault, en appuyant sur entrée, cela va
        refresh la page. */
        e.preventDefault();
        socket.emit('sendMsgToServer', chatInput.value);
        chatInput.value = '';
    };

    socket.on('drawDeck', function(){
        var x = 10;
        var y = 10;

        for (var i = 0; i < 7; i++){
            deck.strokeRect(x, y, 50, 90, "blue");
            x += 65;
        } 
    });
    
</script>
</script>
